<html>  
<head>  
    <meta charset='utf-8'>
    <title>REO.JS</title>
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <link rel="stylesheet" type="text/css" href="./assets/hook.css">
    <script   src="https://code.jquery.com/jquery-3.2.1.min.js" ></script>
</head>  
<body>
<div class=" main">
    <h1>Reo.js <code>&lt;API: then()&gt;</code></h1>
</div>
<div class="container">
    <div class="top">
        <center>
            <code class="test02 litter-box"><span>&lt;script src="<span class="highlight">https://koringz.github.io/reo.js/reo.0.0.2.min.js</span>" &gt;&lt;/script&gt;</code>
        </center>
    </div>
</div>
<div class="container">
    <div class="top">
        <code class="test02 gray">
            js:
            <pre class="box">

                var REO = new Reo();

                // 创建链式调用的方法
                var Chain = REO.chain({
                    module : '<span class="highlight">user_next</span>',
                    val: [22,3,5] // mes1 = 22 ,mes2 = 3, mes3 = 5
                });

                // 定义链式调用
                var getvalue = Chain.then(function ( api, mes1 ) {
                    api( mes1 + 3 );
                })
                .then(function  ( api , mes2, massages ) {
                    api( mes2 +  <span class="highlight">Number(fr.value)</span>  );
                })
                .then(function  ( api , mes3, massages ) {
                    api( mes3 + massages );
                });

                // 输出所有
                var getAll = getvalue.<span class="highlight">all</span>();  // => 25,15,20

                // 或者（使用模块名输出）
                var getAll = getvalue.<span class="highlight">user_next</span>();  // => 25
            </pre>
        </code>
    </div>
</div>
<div class="container">
    <div class="top">
        return value : <code class="fontAlgo highlight fw clock"></code> 
        <span class="table-box"> <input type="text" value="" class="fr"> &nbsp;&nbsp;<button class="btn">确认</button></span>
    </div>
</div>
<div class="container">
    <div class="top">
        <code class="test02"></code>
    </div>
</div>
<div class="container">
    <div class="top">
         <code class=""></code>
    </div>
</div>
</body>

 <script src="./reo.0.0.2.js"></script>
 <script>

var fontAlgo = document.querySelector('.fontAlgo'), fr =  document.querySelector('.fr'), frlen = fr.value;

var REO = new Reo();

var Chain = REO.chain({
    module : 'user_next',
    val: [22,3,5] // mes1 = 22 ,mes2 = 3, mes3 = 5
});

var getvalue = Chain.then(function ( api, mes1 ) {
    api( mes1 + 3 );
}).then(function  (  api , mes2, massages ) {
    api( mes2 + 12 + Number(frlen) );
}).then(function  (  api , mes3, massages ) {
    api( mes3 + massages );
});

fontAlgo.innerText = getvalue.all();

$('.btn').click(function  () {

    var Chain = REO.chain({
        module : 'user_next',
        val: [22,3,5] // mes1 = 22 ,mes2 = 3, mes3 = 5
    });
    var getvalue = Chain.then(function ( api, mes1 ) {
        api( mes1 + 3 );
    })
    .then(function  (  api , mes2, massages ) {
        api( mes2 + Number(fr.value) );
    })
    .then(function  (  api , mes3, massages ) {
        api( mes3 + massages );
    });


    var getAll = getvalue.all();

    $(fontAlgo).html(getAll + '');
});

</script>
</html>
